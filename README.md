# Contrail Particle Visualizer
An aircraft contrail formation simulation display tool. To view, please go to [shyam-patel7.github.io](https://shyam-patel7.github.io).

## Abstract
With the current climate crisis, it is more important than ever that we consider aircraft contrail parameterization results in the conservation equations used in global atmospheric models. The simulation tool displays particles of contrail structure observed at the end of the jet and vortex regime in a web-view that utilizes D3.js and Three.js cross-browser JavaScript libraries for producing dynamic, interactive data visualizations and 3D models. The work was evaluated through a small case study. The tool successfully enables the presentation of contrail particle data.

## Introduction
Contrails are ice crystals generated by water exhaust from aircraft engines. Their contributions to the Earth Radiation Budget—the balance between incoming energy from the sun and the outgoing longwave and reflected shortwave energy from the Earth—is relatively unexplored. In order to learn more about the physics of contrails and their impact on the environment, Roberto Paoli, a research assistant professor in mechanical and industrial engineering, and Liz Marai, computer science associate professor at the University of Illinois at Chicago, have teamed up to work on the project titled, “High-performance Computing and Data-driven Modeling of Aircraft Contrails.”

The 3D nozzle geometry and initial contrail particles data from this project were used to build an interface that displays contrail formation emanating from the jet nozzle at various time steps. To conveniently examine the change in particles at each step, the tool accommodates an animation feature that, when enabled via a play button, runs through the available time steps in sequence at regular intervals without interruption. For future application, a force-directed graph is implemented that includes nodes that encompass simulations and enables the user to directly position the nodes via a click-and-drag operation in order to access available simulation data.

## Methods
To display the 3D nozzle geometry, Dr. Paoli provided a SolidWorks part (SLDPRT) file that contains 3D computer-aided design (CAD) data which can be rendered using SolidWorks Visualize software. From there, the rendered nozzle geometry was exported into a Wavefront OBJ data definition file that represents the 3D geometry in human readable format and a companion Material Template Library (MTL) file that describes the geometry’s surface shading properties. Both of these files are loaded into the web-view’s Three.js WebGL renderer scene during run-time using the OBJLoader and MTLLoader loaders, respectively.

To display the contrail particles, Dr. Paoli’s team provided particle data for seven time steps in a ParaView project. Using the reader module supplied by OpenFOAM’s computational fluid dynamics (CFD) software, the contrail formation was visualized for each of the provided time steps in the accompanying ParaView visualization application. From there, the x, y, and z particle positions were exported into individual comma-separated values (CSV) files. Using D3’s built-in CSV parser, the particle positions recorded in these files are loaded into the web-view’s Three.js scene dynamically as points, rendered by the WebGL renderer using the gl.POINTS type primitive.

To drive the selection, animation and display of time steps, a D3 slider that directs the addition and removal of particles to and from the scene is used. The slider axes are restricted to the subset of available steps for the given simulation, and the selection of any missing or unavailable steps is precluded. When the animation is activated using the accompanying play/pause button, the slider is advanced to the subsequent available step at regular intervals of 2500 milliseconds. To provide adequate time for loading of particle data and to avoid short intervals of vacuity, the change in particles on the scene is rendered after 500 ms. Aside from this, scene rendering is restricted solely to window resizing and user interaction with the model using the Three.js orbit controls (e.g., panning, zooming and rotating) to circumvent any unnecessary memory usage.

For future implementation, a D3 force-directed graph is added as a companion view that runs side-by-side to the simulation view. The nodes of the graph represent individual simulations and can be clicked, dragged and placed according to the user’s preference. It is expected that, when additional data becomes available, the functionality of the graph will be extended to enable the selection and display of available simulation data.
